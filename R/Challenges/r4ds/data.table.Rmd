---
title: "data.table"
author: "Owiti Okola"
date: "October 16, 2018"
output: html_document
    theme: united
    highlight: tango
    toc:true
    toc_depth: 3
   number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE)
knitr::opts_knit$set(normalizePath("C:\\Users\\admin\\Google Drive\\Pgd\\Redcap exercises ---- interview"))

```
# **Inside the `data.table` Package and it's functionality in data analysis**
This Markdown document illustrates the functionality of `data.table` in data wrangling tasks. The primary goal of `datatable` is to reduce programming time (fewer function calls, less variable name repetition) and the second goal is to reduce compute time.
First we remove existing objects using `rm(list = ls())` then clear the work space using the `cat("\014")` function and later set up working directory, and install the `data.table` package. An object in `data.table` takes the form `A[i,j,by()]`; `i` maps to `WHERE` in SQL, `j` maps to `SELECT` in SQL and `by` maps to `GROUP BY` in SQL. The general form is "Take DT, subset rows using `i', then calculate `j' grouped `by`".
```{r}
rm(list=ls()) # clears objects
cat("\014") # clears console
#setwd("C:\\Users\\admin\\Google Drive\\Pgd\\Redcap exercises ---- interview")
getwd()
ipk <- function(pkg) {
  new.pkg <- list.of.pkg[!(list.of.pkg %in% installed.packages()[, "Package"])]
  if(length(new.pkg)) install.packages(new.pkg, repos = 'https://cran.us.r-project.org', dependencies = T)
  sapply(pkg, require, character.only = T)
}
list.of.pkg <- c("tidyverse", "data.table", "magrittr")
ipk(list.of.pkg)
```

We use the `NYC-flights14` data. We can use **data.table**'s fast file reader `fread` to load flights directly as follows:
```{r}
setwd("C:\\Users\\admin\\Google Drive\\Pgd\\Redcap exercises ---- interview")
data <- fread("SampleData.csv")
glimpse(data)
data %<>% rename(serial = V1)
data
```

## **General form of data.table **

```{r}
(dt <- data.table(A = 1:6, B = c("a", "b", "c" ), C = rnorm(6), D = TRUE))
typeof(1) # double  i.e numeric
typeof(1L) # add an L to make it integer
typeof(NA) # logical
typeof(NA_integer_) # integer
```

## **Selecting rows by number in `i`
```{r}
dt[3:5,]
dt[3:5] # returns as above, would throw an error were it a data.frame
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
